# ğŸ“Š Email Notification System - Visual Architecture

## System Overview

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      EDULYTICS SYSTEM                            â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚  ADMIN CONTROL PANEL                                       â”‚  â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚  â”‚
â”‚  â”‚  â”‚ [Release Student Evaluation]  â† ADMIN CLICKS HERE   â”‚  â”‚  â”‚
â”‚  â”‚  â”‚ [Release Peer Evaluation]                            â”‚  â”‚  â”‚
â”‚  â”‚  â”‚ [Unrelease Student Evaluation]                       â”‚  â”‚  â”‚
â”‚  â”‚  â”‚ [Unrelease Peer Evaluation]                          â”‚  â”‚  â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                           â†“                                      â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚  main/views.py                                             â”‚  â”‚
â”‚  â”‚  release_student_evaluation(request)                       â”‚  â”‚
â”‚  â”‚     â”œâ”€ Mark evaluation as is_released=True                â”‚  â”‚
â”‚  â”‚     â”œâ”€ Log admin activity                                 â”‚  â”‚
â”‚  â”‚     â””â”€ CALL: EvaluationEmailService.                      â”‚  â”‚
â”‚  â”‚           send_evaluation_released_notification('student') â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                           â†“                                      â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚  main/email_service.py                                     â”‚  â”‚
â”‚  â”‚  EvaluationEmailService                                    â”‚  â”‚
â”‚  â”‚                                                            â”‚  â”‚
â”‚  â”‚  send_evaluation_released_notification(eval_type)         â”‚  â”‚
â”‚  â”‚     â”œâ”€ Fetch all active users from DB                    â”‚  â”‚
â”‚  â”‚     â”œâ”€ For EACH user:                                    â”‚  â”‚
â”‚  â”‚     â”‚  â”œâ”€ Generate subject line                          â”‚  â”‚
â”‚  â”‚     â”‚  â”œâ”€ Generate HTML email content                    â”‚  â”‚
â”‚  â”‚     â”‚  â”œâ”€ Generate text email content                    â”‚  â”‚
â”‚  â”‚     â”‚  â””â”€ Send via Gmail SMTP                            â”‚  â”‚
â”‚  â”‚     â”œâ”€ Collect results (success/failures)                â”‚  â”‚
â”‚  â”‚     â””â”€ Return summary                                     â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                           â†“                                      â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚  DJANGO EMAIL BACKEND                                      â”‚  â”‚
â”‚  â”‚  django.core.mail.backends.smtp.EmailBackend              â”‚  â”‚
â”‚  â”‚     â”œâ”€ Connect to Gmail SMTP (smtp.gmail.com:587)         â”‚  â”‚
â”‚  â”‚     â”œâ”€ Authenticate with app password                     â”‚  â”‚
â”‚  â”‚     â”œâ”€ Send EmailMultiAlternatives                        â”‚  â”‚
â”‚  â”‚     â””â”€ Close connection                                    â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                           â†“                                      â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚  GMAIL SMTP SERVER (smtp.gmail.com)                        â”‚  â”‚
â”‚  â”‚     â”œâ”€ Receive email from system                          â”‚  â”‚
â”‚  â”‚     â”œâ”€ Verify sender authentication                       â”‚  â”‚
â”‚  â”‚     â”œâ”€ Route to recipient inboxes                         â”‚  â”‚
â”‚  â”‚     â””â”€ Store in user mailboxes                            â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                           â†“                                      â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚  USER GMAIL INBOXES                                        â”‚  â”‚
â”‚  â”‚                                                            â”‚  â”‚
â”‚  â”‚  ğŸ“¨ 58 Notifications Received                             â”‚  â”‚
â”‚  â”‚     â”œâ”€ student1@cca.edu.ph                               â”‚  â”‚
â”‚  â”‚     â”œâ”€ student2@cca.edu.ph                               â”‚  â”‚
â”‚  â”‚     â”œâ”€ dean@gmail.com                                     â”‚  â”‚
â”‚  â”‚     â”œâ”€ faculty@gmail.com                                  â”‚  â”‚
â”‚  â”‚     â”œâ”€ coordinator@gmail.com                              â”‚  â”‚
â”‚  â”‚     â””â”€ ... (54 more users)                               â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                           â†“                                      â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚  ADMIN GETS RESPONSE                                       â”‚  â”‚
â”‚  â”‚  {                                                         â”‚  â”‚
â”‚  â”‚    "success": true,                                       â”‚  â”‚
â”‚  â”‚    "message": "Student evaluation released",              â”‚  â”‚
â”‚  â”‚    "email_notification": {                                â”‚  â”‚
â”‚  â”‚      "sent": 58,                                          â”‚  â”‚
â”‚  â”‚      "failed": 0,                                         â”‚  â”‚
â”‚  â”‚      "message": "Successfully sent to 58 users"           â”‚  â”‚
â”‚  â”‚    }                                                       â”‚  â”‚
â”‚  â”‚  }                                                         â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## Email Sending Sequence Diagram

```
ADMIN                   SYSTEM              DATABASE        GMAIL           USERS
  â”‚                       â”‚                   â”‚              â”‚              â”‚
  â”œâ”€ Click Release â”€â”€â”€â”€â”€â†’ â”‚                   â”‚              â”‚              â”‚
  â”‚                       â”‚                   â”‚              â”‚              â”‚
  â”‚                       â”œâ”€ Mark Released â”€â†’ â”‚              â”‚              â”‚
  â”‚                       â”‚                   â”‚              â”‚              â”‚
  â”‚                       â”œâ”€ Get Users â”€â”€â”€â”€â”€â”€â†’ â”‚              â”‚              â”‚
  â”‚                       â”‚                   â”‚              â”‚              â”‚
  â”‚                       â”œâ”€ User 1 Data â†â”€â”€â”€ â”‚              â”‚              â”‚
  â”‚                       â”‚                   â”‚              â”‚              â”‚
  â”‚                       â”œâ”€ Generate Email                 â”‚              â”‚
  â”‚                       â”‚                   â”‚              â”‚              â”‚
  â”‚                       â”œâ”€ Send to SMTP â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â†’ â”‚              â”‚
  â”‚                       â”‚                   â”‚              â”‚              â”‚
  â”‚                       â”‚                   â”‚              â”œâ”€â†’ User 1 ğŸ“§  â”‚
  â”‚                       â”‚                   â”‚              â”‚              â”‚
  â”‚                       â”œâ”€ User 2 Data â†â”€â”€â”€ â”‚              â”‚              â”‚
  â”‚                       â”œâ”€ Generate Email                 â”‚              â”‚
  â”‚                       â”œâ”€ Send to SMTP â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â†’ â”‚              â”‚
  â”‚                       â”‚                   â”‚              â”‚              â”‚
  â”‚                       â”‚                   â”‚              â”œâ”€â†’ User 2 ğŸ“§  â”‚
  â”‚                       â”‚                   â”‚              â”‚              â”‚
  â”‚    [Repeat for all 58 users]                                            â”‚
  â”‚                       â”‚                   â”‚              â”‚              â”‚
  â”‚                       â”œâ”€ Return Result                   â”‚              â”‚
  â”‚                       â”‚                   â”‚              â”‚              â”‚
  â”‚ â† Confirmation â”€â”€â”€â”€â”€  â”‚                   â”‚              â”‚              â”‚
  â”‚ "Sent: 58 Failed: 0"  â”‚                   â”‚              â”‚              â”‚
  â”‚                       â”‚                   â”‚              â”‚              â”‚
```

---

## Data Flow During Release

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ADMIN RELEASES EVALUATION                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                    â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  main/views.py â†’ release_student_evaluation()       â”‚
â”‚                                                     â”‚
â”‚  POST /release-evaluation/                          â”‚
â”‚  Request Method: POST                               â”‚
â”‚  Admin: request.user                                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                    â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  UPDATE Evaluation Table                            â”‚
â”‚                                                     â”‚
â”‚  Evaluation.objects.filter(                         â”‚
â”‚    is_released=False,                               â”‚
â”‚    evaluation_type='student'                        â”‚
â”‚  ).update(is_released=True)                         â”‚
â”‚                                                     â”‚
â”‚  âœ… 12 evaluations updated                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                    â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  log_admin_activity()                               â”‚
â”‚                                                     â”‚
â”‚  {                                                  â”‚
â”‚    "user": admin,                                   â”‚
â”‚    "action": "release_evaluation",                  â”‚
â”‚    "description": "Released 12 evaluations",        â”‚
â”‚    "timestamp": "2025-11-09 13:30:45"               â”‚
â”‚  }                                                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                    â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  EvaluationEmailService.                            â”‚
â”‚  send_evaluation_released_notification()            â”‚
â”‚                                                     â”‚
â”‚  1. Get Users:                                      â”‚
â”‚     User.objects.filter(is_active=True)             â”‚
â”‚     Result: 58 users                                â”‚
â”‚                                                     â”‚
â”‚  2. Generate Email:                                 â”‚
â”‚     â”œâ”€ Subject: "ğŸ“ Evaluation Released"            â”‚
â”‚     â”œâ”€ HTML: Beautiful formatted email              â”‚
â”‚     â””â”€ Text: Plain text version                     â”‚
â”‚                                                     â”‚
â”‚  3. Send Each Email:                                â”‚
â”‚     for user in users:                              â”‚
â”‚       send_mail(to=user.email, ...)                â”‚
â”‚                                                     â”‚
â”‚  4. Result:                                         â”‚
â”‚     {                                               â”‚
â”‚       'sent_count': 58,                             â”‚
â”‚       'failed_emails': [],                          â”‚
â”‚       'success': True                               â”‚
â”‚     }                                               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                    â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  RETURN RESPONSE                                    â”‚
â”‚                                                     â”‚
â”‚  JsonResponse({                                     â”‚
â”‚    'success': True,                                 â”‚
â”‚    'message': 'Released',                           â”‚
â”‚    'email_notification': {                          â”‚
â”‚      'sent': 58,                                    â”‚
â”‚      'failed': 0,                                   â”‚
â”‚      'message': 'Sent to 58 users'                  â”‚
â”‚    }                                                â”‚
â”‚  })                                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                    â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ADMIN SEES CONFIRMATION                            â”‚
â”‚                                                     â”‚
â”‚  âœ… Evaluation Released                             â”‚
â”‚  âœ… Emails Sent: 58                                 â”‚
â”‚  âœ… Failed: 0                                       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                    â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  58 USERS RECEIVE EMAILS                            â”‚
â”‚                                                     â”‚
â”‚  Gmail Notification Flow:                           â”‚
â”‚  â”œâ”€ Email arrives in inbox                          â”‚
â”‚  â”œâ”€ User sees notification                          â”‚
â”‚  â”œâ”€ User opens email                                â”‚
â”‚  â”œâ”€ User reads announcement                         â”‚
â”‚  â”œâ”€ User clicks "Access Evaluation" link            â”‚
â”‚  â”œâ”€ User redirected to system                       â”‚
â”‚  â””â”€ User completes evaluation                       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## Email Template Structure

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  EMAIL MULTIPART STRUCTURE                          â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                     â”‚
â”‚  EmailMultiAlternatives(                            â”‚
â”‚    subject="ğŸ“ Evaluation Released",                â”‚
â”‚    body="Plain text version...",                    â”‚
â”‚    from_email="system@gmail.com",                   â”‚
â”‚    to=["user@gmail.com"]                            â”‚
â”‚  )                                                  â”‚
â”‚    â†“                                                â”‚
â”‚    attach_alternative(                              â”‚
â”‚      "<html>...</html>",                            â”‚
â”‚      "text/html"                                    â”‚
â”‚    )                                                â”‚
â”‚                                                     â”‚
â”‚  Result in User's Inbox:                            â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                    â”‚
â”‚  â”‚ ğŸ“§ ğŸ“ Evaluation Released   â”‚                    â”‚
â”‚  â”‚    from: system@gmail.com   â”‚                    â”‚
â”‚  â”‚                             â”‚                    â”‚
â”‚  â”‚ [HTML VERSION DISPLAYED]    â”‚                    â”‚
â”‚  â”‚ - Professional formatting   â”‚                    â”‚
â”‚  â”‚ - Colors & styling          â”‚                    â”‚
â”‚  â”‚ - Clickable buttons          â”‚                    â”‚
â”‚  â”‚ - Logo & branding           â”‚                    â”‚
â”‚  â”‚                             â”‚                    â”‚
â”‚  â”‚ (If HTML not supported,     â”‚                    â”‚
â”‚  â”‚  plain text shown)          â”‚                    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                    â”‚
â”‚                                                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## Email Service Architecture

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  main/email_service.py                                   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                          â”‚
â”‚  class EvaluationEmailService:                           â”‚
â”‚                                                          â”‚
â”‚    â”œâ”€ PUBLIC METHODS:                                   â”‚
â”‚    â”‚  â”œâ”€ send_evaluation_released_notification()       â”‚
â”‚    â”‚  â”‚  â””â”€ Sends to all active users                 â”‚
â”‚    â”‚  â””â”€ send_evaluation_unreleased_notification()     â”‚
â”‚    â”‚     â””â”€ Sends close notification                   â”‚
â”‚    â”‚                                                    â”‚
â”‚    â”œâ”€ HELPER METHODS:                                  â”‚
â”‚    â”‚  â”œâ”€ _send_release_email()                        â”‚
â”‚    â”‚  â”œâ”€ _send_unreleased_email()                     â”‚
â”‚    â”‚  â”œâ”€ _get_release_subject()                       â”‚
â”‚    â”‚  â”œâ”€ _get_release_html_content()                  â”‚
â”‚    â”‚  â”œâ”€ _get_release_text_content()                  â”‚
â”‚    â”‚  â”œâ”€ _get_unreleased_subject()                    â”‚
â”‚    â”‚  â”œâ”€ _get_unreleased_html_content()               â”‚
â”‚    â”‚  â””â”€ _get_unreleased_text_content()               â”‚
â”‚    â”‚                                                    â”‚
â”‚    â””â”€ FEATURES:                                         â”‚
â”‚       â”œâ”€ Batch processing (58 users at once)           â”‚
â”‚       â”œâ”€ Personalization (user names)                  â”‚
â”‚       â”œâ”€ Error handling (failed email list)            â”‚
â”‚       â”œâ”€ Logging (all activities)                      â”‚
â”‚       â”œâ”€ Retry logic (built into Django)               â”‚
â”‚       â””â”€ Response tracking (sent count)                â”‚
â”‚                                                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## Configuration Architecture

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  .env File                   â”‚
â”‚  (Your Machine)              â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ EMAIL_HOST=smtp.gmail.com    â”‚
â”‚ EMAIL_PORT=587               â”‚
â”‚ EMAIL_USE_TLS=True           â”‚
â”‚ EMAIL_HOST_USER=...@gmail.comâ”‚
â”‚ EMAIL_HOST_PASSWORD=***      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â†“ (SECURE)
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Django settings.py                          â”‚
â”‚  (Loads from environment variables)          â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ EMAIL_BACKEND=django.core.mail...           â”‚
â”‚ EMAIL_HOST=os.getenv('EMAIL_HOST')           â”‚
â”‚ EMAIL_PORT=int(os.getenv('EMAIL_PORT'))      â”‚
â”‚ EMAIL_USE_TLS=True                           â”‚
â”‚ EMAIL_HOST_USER=os.getenv('EMAIL_HOST_USER')â”‚
â”‚ EMAIL_HOST_PASSWORD=os.getenv('...')         â”‚
â”‚ DEFAULT_FROM_EMAIL=os.getenv('...')          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â†“ (SECURE)
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Django Email Backend             â”‚
â”‚  (Runtime)                        â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Uses configured credentials       â”‚
â”‚ to connect to Gmail SMTP          â”‚
â”‚ and send emails                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â†“ (SECURE)
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Gmail SMTP Server                â”‚
â”‚  (smtp.gmail.com:587)             â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Receives authenticated connection â”‚
â”‚ Routes emails to recipients       â”‚
â”‚ Delivers to user inboxes          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## Integration Points

```
Before:                          After:
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

main/views.py                    main/views.py
â”œâ”€ release_student_eval()   â†’   â”œâ”€ release_student_eval()
â”‚  â”œâ”€ Update DB                 â”‚  â”œâ”€ Update DB
â”‚  â”œâ”€ Log activity              â”‚  â”œâ”€ Log activity
â”‚  â””â”€ Return response      â†’     â”‚  â”œâ”€ SEND EMAILS âœ¨ NEW
â”‚                               â”‚  â””â”€ Return response
â”‚                               â”‚
â”œâ”€ unrelease_student_eval() â†’   â”œâ”€ unrelease_student_eval()
â”‚  â”œâ”€ Update DB                 â”‚  â”œâ”€ Update DB
â”‚  â”œâ”€ Process results           â”‚  â”œâ”€ Process results
â”‚  â”œâ”€ Log activity              â”‚  â”œâ”€ Log activity
â”‚  â””â”€ Return response      â†’     â”‚  â”œâ”€ SEND EMAILS âœ¨ NEW
â”‚                               â”‚  â””â”€ Return response
â”‚
â”œâ”€ release_peer_eval()      â†’   â”œâ”€ release_peer_eval()
â”‚  â”œâ”€ Create period              â”‚  â”œâ”€ Create period
â”‚  â”œâ”€ Update DB                  â”‚  â”œâ”€ Update DB
â”‚  â””â”€ Return response     â†’      â”‚  â”œâ”€ SEND EMAILS âœ¨ NEW
â”‚                               â”‚  â””â”€ Return response
â”‚
â””â”€ unrelease_peer_eval()    â†’   â””â”€ unrelease_peer_eval()
   â”œâ”€ Update DB                   â”œâ”€ Update DB
   â”œâ”€ Process results             â”œâ”€ Process results
   â””â”€ Return response      â†’      â”œâ”€ SEND EMAILS âœ¨ NEW
                                  â””â”€ Return response
```

---

## Response Flow

```
ADMIN RELEASES EVALUATION
        â†“
    (200ms - Update DB)
        â†“
    (300ms - Send 58 Emails)
        â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ HttpResponse (500ms total)                        â”‚
â”‚                                                   â”‚
â”‚ {                                                 â”‚
â”‚   "success": true,                                â”‚
â”‚   "message": "Student evaluation form has been    â”‚
â”‚              released. Evaluation period started",â”‚
â”‚   "student_evaluation_released": true,            â”‚
â”‚   "evaluation_period_ended": false,               â”‚
â”‚   "email_notification": {                         â”‚
â”‚     "sent": 58,                                   â”‚
â”‚     "failed": 0,                                  â”‚
â”‚     "message": "Successfully sent student         â”‚
â”‚                evaluation release notification   â”‚
â”‚                to 58 users"                       â”‚
â”‚   }                                               â”‚
â”‚ }                                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
        â†“
    Admin sees:
    âœ… Evaluation Released
    âœ… Emails Sent: 58
    âœ… Failed: 0
```

---

## Summary

This visual architecture shows:

1. **End-to-End Flow** - Admin click â†’ Emails delivered
2. **Sequence Diagram** - What happens in what order
3. **Data Flow** - How information moves through system
4. **Email Structure** - How emails are formatted
5. **Service Architecture** - Email service class organization
6. **Configuration** - How credentials are managed securely
7. **Integration Points** - Where email sending hooks into views
8. **Response Flow** - What admin sees and timing

All components work together to provide **automatic, professional email notifications** when evaluations are released! ğŸ“§âœ¨
